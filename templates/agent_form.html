{% extends "base.html" %}
{% block title %}{{ 'Modifica' if agent else 'Nuovo' }} agente{% endblock %}
{% block content %}
<div class="card glass">
  <h2>{{ 'Modifica' if agent else 'Nuovo' }} agente</h2>

  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}

  <form method="post" class="grid-2">
    <div>
      <label>Slug (per l'URL)</label>
      <input name="slug" value="{{ agent.slug if agent else '' }}" required>

      <label>Nome completo</label>
      <input name="name" value="{{ agent.name if agent else '' }}" required>

      <label>Azienda</label>
      <input name="company" value="{{ agent.company if agent else '' }}">

      <label>Posizione lavorativa</label>
      <input name="role" value="{{ agent.role if agent else '' }}">

      <label>Descrizione / Bio</label>
      <textarea name="bio" rows="4">{{ agent.bio if agent else '' }}</textarea>
    </div>

    <div>
      <label>Telefono mobile</label>
      <input name="phone_mobile" value="{{ agent.phone_mobile if agent else '' }}">

      <label>Telefono ufficio</label>
      <input name="phone_office" value="{{ agent.phone_office if agent else '' }}">

      <label>Mail (separa con virgola)</label>
      <input name="emails"
             value="{{ agent.emails if agent else '' }}"
             placeholder="a@x.it, b@x.it">

      <label>Siti web (separa con virgola)</label>
      <input name="websites"
             value="{{ agent.websites if agent else '' }}"
             placeholder="https://..., https://...">
    </div>
  </form>

  <h3>Social</h3>
  <form method="post" class="grid-2">
    <div>
      <label>Facebook</label>
      <input name="facebook" value="{{ agent.facebook if agent else '' }}">

      <label>Instagram</label>
      <input name="instagram" value="{{ agent.instagram if agent else '' }}">

      <label>LinkedIn</label>
      <input name="linkedin" value="{{ agent.linkedin if agent else '' }}">
    </div>
    <div>
      <label>TikTok</label>
      <input name="tiktok" value="{{ agent.tiktok if agent else '' }}">

      <label>Telegram</label>
      <input name="telegram" value="{{ agent.telegram if agent else '' }}">

      <label>WhatsApp (numero o link wa.me)</label>
      <input name="whatsapp"
             value="{{ agent.whatsapp if agent else '' }}"
             placeholder="3939... oppure https://wa.me/...">
    </div>
  </form>

  <h3>Dati aziendali</h3>
  <form method="post" class="grid-2">
    <div>
      <label>PEC</label>
      <input name="pec" value="{{ agent.pec if agent else '' }}">

      <label>Partita IVA</label>
      <input name="piva" value="{{ agent.piva if agent else '' }}">

      <label>Codice SDI</label>
      <input name="sdi" value="{{ agent.sdi if agent else '' }}">
    </div>
    <div>
      <label>Indirizzi (max 3, uno per riga)</label>
      <textarea name="addresses" rows="4">{{ agent.addresses if agent else '' }}</textarea>
    </div>
  </form>

  <h3>Media (URL)</h3>
  <form method="post" class="grid-2">
    <div>
      <label>Foto profilo (URL)</label>
      <input name="photo_url"
             value="{{ agent.photo_url if agent else '' }}"
             placeholder="https://...">

      <label>PDF 1 (URL)</label>
      <input name="pdf1_url"
             value="{{ agent.pdf1_url if agent else '' }}"
             placeholder="https://...">

      <label>PDF 2 (URL)</label>
      <input name="pdf2_url"
             value="{{ agent.pdf2_url if agent else '' }}"
             placeholder="https://...">
    </div>
    <div>
      <label>Galleria immagini (URL separati da virgola o a capo)</label>
      <textarea name="gallery_urls" rows="6"
        placeholder="https://img1..., https://img2...">{{ agent.gallery_urls if agent else '' }}</textarea>
    </div>
  </form>

  <form method="post">
    <!-- campo nascosto per mantenere lo slug se il browser fa casino con i form spezzati -->
    <input type="hidden" name="slug" value="{{ agent.slug if agent else '' }}">
    <button type="submit" class="btn primary">Salva</button>
  </form>
</div>
{% endblock %}

